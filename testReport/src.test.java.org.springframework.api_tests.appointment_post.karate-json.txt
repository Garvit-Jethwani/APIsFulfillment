{"failedCount":5,"prefixedPath":"src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature","packageQualifiedName":"src.test.java.org.springframework.api_tests.appointment_post","loopIndex":-1,"relativePath":"src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":549291,"startTime":1717665592836,"endTime":1717665592837,"millis":0.549291,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":0,"text":"def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http:\/\/localhost:4010')"}},{"result":{"nanos":207646,"startTime":1717665592837,"endTime":1717665592837,"millis":0.207646,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":1,"text":"url urlBase"}},{"result":{"nanos":370786,"startTime":1717665592837,"endTime":1717665592837,"millis":0.370786,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":2,"text":"def authToken = karate.properties['AUTH_TOKEN']"}},{"result":{"nanos":703582,"startTime":1717665592837,"endTime":1717665592838,"millis":0.703582,"status":"passed"},"step":{"line":19,"prefix":"Given","index":0,"text":"path '\/appointment'"}},{"result":{"nanos":246061,"startTime":1717665592838,"endTime":1717665592838,"millis":0.246061,"status":"passed"},"step":{"line":20,"prefix":"And","index":1,"text":"header Authorization = authToken"}},{"result":{"nanos":485603,"startTime":1717665592838,"endTime":1717665592838,"millis":0.485603,"status":"passed"},"step":{"endLine":31,"line":21,"prefix":"And","docString":"{\n  \"appointment\": {\n    \"slot\": {\n      \"id\": \"bff13821-73c3-42cc-9327-b05c7df5a67f\"\n    },\n    \"reason\": \"Agendamento para Instalação de Fibra\"\n  }\n}","index":2,"text":"request"}},{"result":{"nanos":41703949,"startTime":1717665592839,"endTime":1717665592881,"millis":41.703949,"status":"passed"},"step":{"line":32,"prefix":"When","index":3,"text":"method POST"},"stepLog":"09:19:52.841 request:\n1 > POST http:\/\/localhost:4010\/appointment\n1 > Authorization: dummy AUTH_TOKEN\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 120\n1 > Host: localhost:4010\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.11)\n1 > Accept-Encoding: gzip,deflate\n{\"appointment\":{\"slot\":{\"id\":\"bff13821-73c3-42cc-9327-b05c7df5a67f\"},\"reason\":\"Agendamento para Instalação de Fibra\"}}\n\n09:19:52.880 response time in milliseconds: 38\n1 < 201\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: *\n1 < Access-Control-Allow-Credentials: true\n1 < Access-Control-Expose-Headers: *\n1 < sl-violations: [{\"location\":[\"response\",\"body\",\"order\",\"type\"],\"severity\":\"Error\",\"code\":\"enum\",\"message\":\"Response body property order.type must be equal to one of the allowed values: InstalaÃ§Ã£o, Retirada, RemanejamentoPonto, ChamadoTecnico\"},{\"location\":[\"response\",\"body\",\"control\",\"code\"],\"severity\":\"Error\",\"code\":\"type\",\"message\":\"Response body property control.code must be string\"}]\n1 < Content-type: application\/json\n1 < Content-Length: 408\n1 < Date: Thu, 06 Jun 2024 09:19:52 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\n\n"},{"result":{"nanos":14667,"startTime":1717665592881,"endTime":1717665592881,"millis":0.014667,"status":"passed"},"step":{"line":33,"prefix":"Then","index":4,"text":"status 201"}},{"result":{"nanos":1286396,"startTime":1717665592881,"endTime":1717665592882,"millis":1.286396,"status":"passed"},"step":{"line":34,"prefix":"And","index":5,"text":"match response.control.type == 'S'"}},{"result":{"nanos":1374496,"errorMessage":"match failed: EQUALS\n  $ | data types don't match (NUMBER:STRING)\n  201\n  '201'\n\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:35","startTime":1717665592882,"endTime":1717665592883,"millis":1.374496,"status":"failed"},"step":{"line":35,"prefix":"And","index":6,"text":"match response.control.code == '201'"},"stepLog":"09:19:52.884 src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:35\nAnd match response.control.code == '201'\nmatch failed: EQUALS\n  $ | data types don't match (NUMBER:STRING)\n  201\n  '201'\n\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:35\n"},{"result":{"nanos":0,"startTime":1717665592884,"endTime":1717665592884,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"And","index":7,"text":"match response.control.message == 'Created'"}},{"result":{"nanos":0,"startTime":1717665592884,"endTime":1717665592884,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"And","index":8,"text":"match response.appointment.id == '#string'"}},{"result":{"nanos":0,"startTime":1717665592884,"endTime":1717665592884,"millis":0.0,"status":"skipped"},"step":{"line":38,"prefix":"And","index":9,"text":"match response.appointment.startDate == '#string'"}},{"result":{"nanos":0,"startTime":1717665592884,"endTime":1717665592884,"millis":0.0,"status":"skipped"},"step":{"line":39,"prefix":"And","index":10,"text":"match response.appointment.finishDate == '#string'"}}],"line":18,"description":"","durationMillis":46.942477,"failed":true,"error":"match failed: EQUALS\n  $ | data types don't match (NUMBER:STRING)\n  201\n  '201'\n\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:35","executorName":"main","name":"Create a new appointment successfully","startTime":1717665592836,"refId":"[1:18]","endTime":1717665592884,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":484054,"startTime":1717665592888,"endTime":1717665592888,"millis":0.484054,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":0,"text":"def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http:\/\/localhost:4010')"}},{"result":{"nanos":98445,"startTime":1717665592889,"endTime":1717665592889,"millis":0.098445,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":1,"text":"url urlBase"}},{"result":{"nanos":310127,"startTime":1717665592889,"endTime":1717665592889,"millis":0.310127,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":2,"text":"def authToken = karate.properties['AUTH_TOKEN']"}},{"result":{"nanos":52768,"startTime":1717665592889,"endTime":1717665592889,"millis":0.052768,"status":"passed"},"step":{"line":42,"prefix":"Given","index":0,"text":"path '\/appointment'"}},{"result":{"nanos":105819,"startTime":1717665592889,"endTime":1717665592889,"millis":0.105819,"status":"passed"},"step":{"line":43,"prefix":"And","index":1,"text":"header Authorization = authToken"}},{"result":{"nanos":394659,"startTime":1717665592890,"endTime":1717665592890,"millis":0.394659,"status":"passed"},"step":{"endLine":54,"line":44,"prefix":"And","docString":"{\n  \"appointment\": {\n    \"slot\": {\n      \"id\": \"invalid-slot-id\"\n    },\n    \"reason\": \"Agendamento para Instalação de Fibra\"\n  }\n}","index":2,"text":"request"}},{"result":{"nanos":14739153,"startTime":1717665592890,"endTime":1717665592905,"millis":14.739153,"status":"passed"},"step":{"line":55,"prefix":"When","index":3,"text":"method POST"},"stepLog":"09:19:52.892 request:\n1 > POST http:\/\/localhost:4010\/appointment\n1 > Authorization: dummy AUTH_TOKEN\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 99\n1 > Host: localhost:4010\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.11)\n1 > Accept-Encoding: gzip,deflate\n{\"appointment\":{\"slot\":{\"id\":\"invalid-slot-id\"},\"reason\":\"Agendamento para Instalação de Fibra\"}}\n\n09:19:52.904 response time in milliseconds: 12\n1 < 201\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: *\n1 < Access-Control-Allow-Credentials: true\n1 < Access-Control-Expose-Headers: *\n1 < sl-violations: [{\"location\":[\"response\",\"body\",\"order\",\"type\"],\"severity\":\"Error\",\"code\":\"enum\",\"message\":\"Response body property order.type must be equal to one of the allowed values: InstalaÃ§Ã£o, Retirada, RemanejamentoPonto, ChamadoTecnico\"},{\"location\":[\"response\",\"body\",\"control\",\"code\"],\"severity\":\"Error\",\"code\":\"type\",\"message\":\"Response body property control.code must be string\"}]\n1 < Content-type: application\/json\n1 < Content-Length: 408\n1 < Date: Thu, 06 Jun 2024 09:19:52 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\n\n"},{"result":{"nanos":152089,"errorMessage":"status code was: 201, expected: 404, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:56","startTime":1717665592905,"endTime":1717665592905,"millis":0.152089,"status":"failed"},"step":{"line":56,"prefix":"Then","index":4,"text":"status 404"},"stepLog":"09:19:52.905 src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:56\nThen status 404\nstatus code was: 201, expected: 404, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:56\n"},{"result":{"nanos":0,"startTime":1717665592905,"endTime":1717665592905,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":5,"text":"match response.control.type == 'E'"}},{"result":{"nanos":0,"startTime":1717665592905,"endTime":1717665592905,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"And","index":6,"text":"match response.control.code == '404'"}},{"result":{"nanos":0,"startTime":1717665592905,"endTime":1717665592905,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"And","index":7,"text":"match response.control.message contains 'Identificador do Slot não encontrado ou expirado'"}}],"line":41,"description":"","durationMillis":16.337114,"failed":true,"error":"status code was: 201, expected: 404, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:56","executorName":"main","name":"Create appointment with invalid slot ID","startTime":1717665592888,"refId":"[2:41]","endTime":1717665592905,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":470378,"startTime":1717665592909,"endTime":1717665592909,"millis":0.470378,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":0,"text":"def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http:\/\/localhost:4010')"}},{"result":{"nanos":115014,"startTime":1717665592910,"endTime":1717665592910,"millis":0.115014,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":1,"text":"url urlBase"}},{"result":{"nanos":320833,"startTime":1717665592910,"endTime":1717665592910,"millis":0.320833,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":2,"text":"def authToken = karate.properties['AUTH_TOKEN']"}},{"result":{"nanos":86372,"startTime":1717665592910,"endTime":1717665592910,"millis":0.086372,"status":"passed"},"step":{"line":62,"prefix":"Given","index":0,"text":"path '\/appointment'"}},{"result":{"nanos":79628,"startTime":1717665592910,"endTime":1717665592910,"millis":0.079628,"status":"passed"},"step":{"line":63,"prefix":"And","index":1,"text":"header Authorization = authToken"}},{"result":{"nanos":390216,"startTime":1717665592910,"endTime":1717665592910,"millis":0.390216,"status":"passed"},"step":{"endLine":71,"line":64,"prefix":"And","docString":"{\n  \"appointment\": {\n    \"reason\": \"Agendamento para Instalação de Fibra\"\n  }\n}","index":2,"text":"request"}},{"result":{"nanos":21013274,"startTime":1717665592911,"endTime":1717665592932,"millis":21.013274,"status":"passed"},"step":{"line":72,"prefix":"When","index":3,"text":"method POST"},"stepLog":"09:19:52.913 request:\n1 > POST http:\/\/localhost:4010\/appointment\n1 > Authorization: dummy AUTH_TOKEN\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 67\n1 > Host: localhost:4010\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.11)\n1 > Accept-Encoding: gzip,deflate\n{\"appointment\":{\"reason\":\"Agendamento para Instalação de Fibra\"}}\n\n09:19:52.931 response time in milliseconds: 18\n1 < 201\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: *\n1 < Access-Control-Allow-Credentials: true\n1 < Access-Control-Expose-Headers: *\n1 < sl-violations: [{\"location\":[\"response\",\"body\",\"order\",\"type\"],\"severity\":\"Error\",\"code\":\"enum\",\"message\":\"Response body property order.type must be equal to one of the allowed values: InstalaÃ§Ã£o, Retirada, RemanejamentoPonto, ChamadoTecnico\"},{\"location\":[\"response\",\"body\",\"control\",\"code\"],\"severity\":\"Error\",\"code\":\"type\",\"message\":\"Response body property control.code must be string\"}]\n1 < Content-type: application\/json\n1 < Content-Length: 408\n1 < Date: Thu, 06 Jun 2024 09:19:52 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\n\n"},{"result":{"nanos":163748,"errorMessage":"status code was: 201, expected: 400, response time in milliseconds: 18, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:73","startTime":1717665592932,"endTime":1717665592932,"millis":0.163748,"status":"failed"},"step":{"line":73,"prefix":"Then","index":4,"text":"status 400"},"stepLog":"09:19:52.933 src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:73\nThen status 400\nstatus code was: 201, expected: 400, response time in milliseconds: 18, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:73\n"},{"result":{"nanos":0,"startTime":1717665592933,"endTime":1717665592933,"millis":0.0,"status":"skipped"},"step":{"line":74,"prefix":"And","index":5,"text":"match response.control.type == 'E'"}},{"result":{"nanos":0,"startTime":1717665592933,"endTime":1717665592933,"millis":0.0,"status":"skipped"},"step":{"line":75,"prefix":"And","index":6,"text":"match response.control.code == '400'"}},{"result":{"nanos":0,"startTime":1717665592933,"endTime":1717665592933,"millis":0.0,"status":"skipped"},"step":{"line":76,"prefix":"And","index":7,"text":"match response.control.message == 'Bad Request'"}}],"line":61,"description":"","durationMillis":22.639463,"failed":true,"error":"status code was: 201, expected: 400, response time in milliseconds: 18, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:73","executorName":"main","name":"Create appointment with missing required fields","startTime":1717665592909,"refId":"[3:61]","endTime":1717665592933,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":401566,"startTime":1717665592936,"endTime":1717665592936,"millis":0.401566,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":0,"text":"def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http:\/\/localhost:4010')"}},{"result":{"nanos":82430,"startTime":1717665592936,"endTime":1717665592936,"millis":0.08243,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":1,"text":"url urlBase"}},{"result":{"nanos":193163,"startTime":1717665592936,"endTime":1717665592936,"millis":0.193163,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":2,"text":"def authToken = karate.properties['AUTH_TOKEN']"}},{"result":{"nanos":32955,"startTime":1717665592937,"endTime":1717665592937,"millis":0.032955,"status":"passed"},"step":{"line":79,"prefix":"Given","index":0,"text":"path '\/appointment'"}},{"result":{"nanos":47959,"startTime":1717665592937,"endTime":1717665592937,"millis":0.047959,"status":"passed"},"step":{"line":80,"prefix":"And","index":1,"text":"header Authorization = authToken"}},{"result":{"nanos":271085,"startTime":1717665592937,"endTime":1717665592937,"millis":0.271085,"status":"passed"},"step":{"endLine":95,"line":81,"prefix":"And","docString":"{\n  \"appointment\": {\n    \"slot\": {\n      \"id\": \"bff13821-73c3-42cc-9327-b05c7df5a67f\"\n    },\n    \"reason\": \"Agendamento para Instalação de Fibra\",\n    \"priority\": {\n      \"flag\": true,\n      \"reason\": \"Cliente Diamond\"\n    }\n  }\n}","index":2,"text":"request"}},{"result":{"nanos":14757799,"startTime":1717665592937,"endTime":1717665592952,"millis":14.757799,"status":"passed"},"step":{"line":96,"prefix":"When","index":3,"text":"method POST"},"stepLog":"09:19:52.939 request:\n1 > POST http:\/\/localhost:4010\/appointment\n1 > Authorization: dummy AUTH_TOKEN\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 172\n1 > Host: localhost:4010\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.11)\n1 > Accept-Encoding: gzip,deflate\n{\"appointment\":{\"slot\":{\"id\":\"bff13821-73c3-42cc-9327-b05c7df5a67f\"},\"reason\":\"Agendamento para Instalação de Fibra\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}}}\n\n09:19:52.951 response time in milliseconds: 12\n1 < 201\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: *\n1 < Access-Control-Allow-Credentials: true\n1 < Access-Control-Expose-Headers: *\n1 < sl-violations: [{\"location\":[\"response\",\"body\",\"order\",\"type\"],\"severity\":\"Error\",\"code\":\"enum\",\"message\":\"Response body property order.type must be equal to one of the allowed values: InstalaÃ§Ã£o, Retirada, RemanejamentoPonto, ChamadoTecnico\"},{\"location\":[\"response\",\"body\",\"control\",\"code\"],\"severity\":\"Error\",\"code\":\"type\",\"message\":\"Response body property control.code must be string\"}]\n1 < Content-type: application\/json\n1 < Content-Length: 408\n1 < Date: Thu, 06 Jun 2024 09:19:52 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\n\n"},{"result":{"nanos":124378,"errorMessage":"status code was: 201, expected: 401, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:97","startTime":1717665592952,"endTime":1717665592952,"millis":0.124378,"status":"failed"},"step":{"line":97,"prefix":"Then","index":4,"text":"status 401"},"stepLog":"09:19:52.952 src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:97\nThen status 401\nstatus code was: 201, expected: 401, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:97\n"},{"result":{"nanos":0,"startTime":1717665592952,"endTime":1717665592952,"millis":0.0,"status":"skipped"},"step":{"line":98,"prefix":"And","index":5,"text":"match response.control.type == 'E'"}},{"result":{"nanos":0,"startTime":1717665592952,"endTime":1717665592952,"millis":0.0,"status":"skipped"},"step":{"line":99,"prefix":"And","index":6,"text":"match response.control.code == '401'"}},{"result":{"nanos":0,"startTime":1717665592952,"endTime":1717665592952,"millis":0.0,"status":"skipped"},"step":{"line":100,"prefix":"And","index":7,"text":"match response.control.message == 'Priorização de agendamento não autorizado'"}}],"line":78,"description":"","durationMillis":15.911335,"failed":true,"error":"status code was: 201, expected: 401, response time in milliseconds: 12, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:97","executorName":"main","name":"Create appointment with unauthorized priority","startTime":1717665592936,"refId":"[4:78]","endTime":1717665592952,"exampleIndex":-1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":395661,"startTime":1717665592956,"endTime":1717665592956,"millis":0.395661,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":0,"text":"def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http:\/\/localhost:4010')"}},{"result":{"nanos":64631,"startTime":1717665592956,"endTime":1717665592956,"millis":0.064631,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":1,"text":"url urlBase"}},{"result":{"nanos":186650,"startTime":1717665592956,"endTime":1717665592956,"millis":0.18665,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":2,"text":"def authToken = karate.properties['AUTH_TOKEN']"}},{"result":{"nanos":33764,"startTime":1717665592957,"endTime":1717665592957,"millis":0.033764,"status":"passed"},"step":{"line":103,"prefix":"Given","index":0,"text":"path '\/appointment'"}},{"result":{"nanos":412885,"startTime":1717665592957,"endTime":1717665592957,"millis":0.412885,"status":"passed"},"step":{"endLine":114,"line":104,"prefix":"And","docString":"{\n  \"appointment\": {\n    \"slot\": {\n      \"id\": \"bff13821-73c3-42cc-9327-b05c7df5a67f\"\n    },\n    \"reason\": \"Agendamento para Instalação de Fibra\"\n  }\n}","index":1,"text":"request"}},{"result":{"nanos":19945856,"startTime":1717665592957,"endTime":1717665592977,"millis":19.945856,"status":"passed"},"step":{"line":115,"prefix":"When","index":2,"text":"method POST"},"stepLog":"09:19:52.959 request:\n1 > POST http:\/\/localhost:4010\/appointment\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 120\n1 > Host: localhost:4010\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.11)\n1 > Accept-Encoding: gzip,deflate\n{\"appointment\":{\"slot\":{\"id\":\"bff13821-73c3-42cc-9327-b05c7df5a67f\"},\"reason\":\"Agendamento para Instalação de Fibra\"}}\n\n09:19:52.977 response time in milliseconds: 17\n1 < 201\n1 < Access-Control-Allow-Origin: *\n1 < Access-Control-Allow-Headers: *\n1 < Access-Control-Allow-Credentials: true\n1 < Access-Control-Expose-Headers: *\n1 < sl-violations: [{\"location\":[\"response\",\"body\",\"order\",\"type\"],\"severity\":\"Error\",\"code\":\"enum\",\"message\":\"Response body property order.type must be equal to one of the allowed values: InstalaÃ§Ã£o, Retirada, RemanejamentoPonto, ChamadoTecnico\"},{\"location\":[\"response\",\"body\",\"control\",\"code\"],\"severity\":\"Error\",\"code\":\"type\",\"message\":\"Response body property control.code must be string\"}]\n1 < Content-type: application\/json\n1 < Content-Length: 408\n1 < Date: Thu, 06 Jun 2024 09:19:52 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\n\n"},{"result":{"nanos":164730,"errorMessage":"status code was: 201, expected: 401, response time in milliseconds: 17, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:116","startTime":1717665592977,"endTime":1717665592977,"millis":0.16473,"status":"failed"},"step":{"line":116,"prefix":"Then","index":3,"text":"status 401"},"stepLog":"09:19:52.978 src\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:116\nThen status 401\nstatus code was: 201, expected: 401, response time in milliseconds: 17, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:116\n"},{"result":{"nanos":0,"startTime":1717665592978,"endTime":1717665592978,"millis":0.0,"status":"skipped"},"step":{"line":117,"prefix":"And","index":4,"text":"match response.control.type == 'E'"}},{"result":{"nanos":0,"startTime":1717665592978,"endTime":1717665592978,"millis":0.0,"status":"skipped"},"step":{"line":118,"prefix":"And","index":5,"text":"match response.control.code == '401'"}},{"result":{"nanos":0,"startTime":1717665592978,"endTime":1717665592978,"millis":0.0,"status":"skipped"},"step":{"line":119,"prefix":"And","index":6,"text":"match response.control.message == 'Unauthorized'"}}],"line":102,"description":"","durationMillis":21.204177,"failed":true,"error":"status code was: 201, expected: 401, response time in milliseconds: 17, url: http:\/\/localhost:4010\/appointment, response: \n{\"order\":{\"type\":\"Instalacao\",\"associatedDocument\":\"VTT001\",\"addressChange\":{\"flag\":true}},\"customer\":{\"subscriberId\":\"VTAL001\"},\"appointment\":{\"id\":\"SA-562403\",\"startDate\":\"2021-05-30T13:00:00\",\"finishDate\":\"2021-05-30T18:00:00\",\"priority\":{\"flag\":true,\"reason\":\"Cliente Diamond\"}},\"address\":{\"id\":17713},\"products\":{\"product\":[{\"type\":\"Banda Larga\"}]},\"control\":{\"type\":\"S\",\"code\":201,\"message\":\"Created\"}}\nsrc\/test\/java\/org\/springframework\/api_tests\/appointment_post.feature:116","executorName":"main","name":"Create appointment without authentication token","startTime":1717665592956,"refId":"[5:102]","endTime":1717665592978,"exampleIndex":-1}],"callDepth":0,"name":"Appointment API","description":"","resultDate":"2024-06-06 09:19:52 AM","durationMillis":123.034566,"passedCount":0}